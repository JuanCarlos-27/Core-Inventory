{% extends 'baseIndex.html' %}
{% block title %} Catalogo {% endblock %}
{% block css %}
    <script src="https://kit.fontawesome.com/9c6f82517c.js" crossorigin="anonymous"></script> 
{% endblock css %}
{% block content  %}
{% if messages %}
{% for m in messages %}
    {% if m.tags == 'success' %}
        <script type="text/javascript">
            const mensajeExito = ()=>{
                const Toast = Swal.mixin({
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                    toast.addEventListener('mouseenter', Swal.stopTimer)
                    toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                })
                
                Toast.fire({
                    icon: 'success',
                    title: "{{ m }}"
                })
            }
            mensajeExito();
        </script>
    {% else %}
    <script type="text/javascript">
        const mensajeError = ()=>{
            Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: '{{ m }}'
            })
        }
        mensajeError();
    </script>
    {% endif %}
{% endfor %}
{% endif %}
<main role="main">
  <div class="container d-flex flex-wrap justify-content-center">
    {% if not user.is_authenticated  %}
      {% include 'carousel.html' %}
    {% endif %}
    {% for p in product_list  %}
    <div class="col-xs-12 col-md-6 bootstrap snippets bootdeys">
      <div class="product-content product-wrap clearfix m-2">
      <div class="row">
          <div class="col-md-5 col-sm-12 col-xs-12">
            <div class="product-image">
              <img src={{p.image_product.url}} alt="{{p.name}}" width="200px" height="200px" class="img-responsive"/>   
            </div>
          </div>
          <div class="col-md-7 col-sm-12 col-xs-12">
          <div class="product-deatil">
              <h4 class="name">
                <a href="#">{{p.name}}</a>
                {% if p.status == 0 and p.stock != 0 %}
                      <span class="badge rounded-pill text-bg-success">Disponible</span>
                {% else %}
                      <span class="badge rounded-pill text-bg-danger">Agotado</span>
                {% endif %}
              </h4>
              <p class="price-container ">
                {% load humanize %}
                <span class="text-dark">${{p.price|intcomma }}</span>
              </p>
              <span class="tag1"></span> 
          </div>
          <div class="description">
            <p class="h6">{{p.descripction}} </p>
          </div>
          <div class="product-info smart-form">
            <div class="row">
              <div class="col-md-6 col-sm-6 col-xs-6"> 
                {% if p.status == 0 and p.stock != 0%}
                  <a href="{% url 'product_detail' p.slug %}" class="text-white shadow fw-bold btn" style="background-color:#F37828;">Ver detalle</a>
                {% else %}
                  <a href="" class="text-white btn disabled" style="background-color:#F37828;">Ver detalle</a>
                {% endif %}
              </div>
              <div class="col-md-6 col-sm-6 col-xs-6">
                <div class="rating">
                  <label for="stars-rating-1"><i class="fa fa-star text-warning"></i></label>
                  <label for="stars-rating-2"><i class="fa fa-star text-warning"></i></label>
                  <label for="stars-rating-3"><i class="fa fa-star text-warning"></i></label>
                  <label for="stars-rating-4"><i class="fa fa-star text-warning"></i></label>
                  <label for="stars-rating-5"><i class="fa fa-star"></i></label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% include 'paginator.html' %}
</main>
{% endblock content%}