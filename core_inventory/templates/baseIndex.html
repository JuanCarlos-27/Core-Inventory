{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="title" content="Sistema de ventas y pedidos online">
    <meta name="description" content="Sistema de ventas online de de hortalizas, frutas y verduras">
    <meta name="keywords" content="frutas,verduras,hortalizas,inventario,pedidos,online">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="language" content="Spanish">
    <meta name="revisit-after" content=" days">
    <meta name="author" content="core inventory">
    <title>Inicio | {% block title %}{% endblock %}</title>

    {% if stripe_public_key %}
      <meta name="stripe_public_key" content="{{stripe_public_key}}" />
    {% endif %}
    {% comment %} <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous"> {% endcomment %}
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/cardStyles.css' %}">
    <link rel="stylesheet" href="{% static 'css/estilosFormulario.css' %}">
    <link rel="stylesheet" href="{% static 'css/myStyle.css' %}">
    {% block css %}{% endblock %}
</head>
<body>
  {% if messages %}
    {% for m in messages %}
        {% if m.tags == 'success' %}
            <script type="text/javascript">
                const mensajeExito = ()=>{
                    const Toast = Swal.mixin({
                        toast: true,
                        position: 'top-end',
                        showConfirmButton: false,
                        timer: 3000,
                        timerProgressBar: true,
                        didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                        }
                    })
                    
                    Toast.fire({
                        icon: 'success',
                        title: "{{ m }}"
                    })
                }
                mensajeExito();
            </script>
        {% else %}
        <script type="text/javascript">
            const mensajeError = ()=>{
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: '{{ m }}'
                })
            }
            mensajeError();
        </script>
        {% endif %}
    {% endfor %}
  {% endif %}
  <header class="py-3 mb-4 rounded-bottom shadow" style="background:#F37828;">
      <div class="container d-flex flex-wrap justify-content-between">
        {% comment %} <a href="#" class="d-flex align-items-center col-md-1 col-12 justify-content-center text-decoration-none">
            <img src="static/img/logo1.png" alt="" width="40px" height="40px"> 
        </a> {% endcomment %}
        {% include 'Productos/search_bar.html' %}
        {% if user.is_authenticated  %}
        <a href="#" class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle col-xl-1 justify-content-center position-relative" id="dropdownUser1" aria-label="Menú desplegable para otras opciones" data-bs-toggle="dropdown" aria-expanded="false">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-user-circle" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><circle cx="12" cy="10" r="3"/><path d="M6.168 18.849A4 4 0 0 1 10 16h4a4 4 0 0 1 3.834 2.855"/></svg>
        </a>
        <ul class="dropdown-menu text-small" aria-labelledby="Opciones del menú desplegable">
          <li><a class="dropdown-item" href="{% url 'Users:user_info' %}">Perfil</a></li>
          <li><a class="dropdown-item" href="{% url 'address:shipping_addresses' %}">Direcciones</a></li>
          <li><a class="dropdown-item" href="{% url 'logout' %}">Cerrar Sesión</a></li>
        </ul>

        <ul class="nav d-flex pt-3 col-12 justify-content-center gap-3 align-items-center">
          <li class="d-flex flex-wrap align-items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-home" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M5 12H3l9-9 9 9h-2M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-7"/><path d="M9 21v-6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v6"/></svg>
            <a href="{% url 'index' %}" class="navigation-link">Inicio</a>
          </li>
          <li class="d-flex flex-wrap align-items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-mail" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><rect width="18" height="14" x="3" y="5" rx="2"/><path d="m3 7 9 6 9-6"/></svg>
            <a href="{% url 'contact' %}" class="navigation-link">Contáctenos</a>
          </li>
          {% if user.is_superuser or user.is_staff %}
          <li class="d-flex flex-wrap align-items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-id" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><rect width="18" height="16" x="3" y="4" rx="3"/><circle cx="9" cy="10" r="2"/><path d="M15 8h2M15 12h2M7 16h10"/></svg>           
            <a href="/admin" target="_blank" class="navigation-link">Panel de administrador</a>
          </li> 
          {% endif %}
          <li class="d-flex flex-wrap align-items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-credit-card" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><rect width="18" height="14" x="3" y="5" rx="3"/><path d="M3 10h18M7 15h.01M11 15h2"/></svg>
            <a href="{% url 'billing:create' %}" class="navigation-link">Métodos de pago</a>
          </li>
          <li class="d-flex flex-wrap align-items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-package" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="m12 3 8 4.5v9L12 21l-8-4.5v-9L12 3M12 12l8-4.5M12 12v9M12 12 4 7.5M16 5.25l-8 4.5"/></svg>
            <a href="{% url 'Orders:orders_list' %}" class="navigation-link">Mis Pedidos</a>
          </li>
          <li class="d-flex flex-wrap align-items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-shopping-cart" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="6" cy="19" r="2"/><circle cx="17" cy="19" r="2"/><path d="M17 17H6V3H4"/><path d="m6 5 14 1-1 7H6"/></svg>
            <a href="{% url 'Carts:cart' %}" class="navigation-link position-relative">Mi Carrito
              <span id="add-product" class="position-absolute top-15 start-100 translate-middle badge  bg-danger"></span>
            </a>
          </li>
          {% if promo_code and not promo_code.send %}
            <img src="https://images.emojiterra.com/google/noto-emoji/v2.034/512px/1f381.png" onclick="location.href='{% url 'promo_code:send_promo_code' %}'" alt="logo codigo promocion" width="35px" height="35px" class="d-none d-sm-flex ms-4 promo_code">    
          {% endif %}
        </ul>
        {% else %}
          <a href="{% url 'Carts:cart' %}" class="col-xl-1 d-flex justify-content-center align-items-center text-center position-relative"> 
            <span id="add-product" class="position-absolute top-0 translate-middle badge rounded-pill bg-danger" style="left:75%"></span>
            <svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-shopping-cart" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="6" cy="19" r="2"/><circle cx="17" cy="19" r="2"/><path d="M17 17H6V3H4"/><path d="m6 5 14 1-1 7H6"/></svg>
          </a>
          <section class="d-flex pt-3 col-12 justify-content-between px-5">
          <ul class="nav d-flex">
            <li class="d-flex flex-wrap align-items-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-home" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M5 12H3l9-9 9 9h-2M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-7"/><path d="M9 21v-6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v6"/></svg>
              <a href="{% url 'index' %}" class="navigation-link">Inicio</a>
            </li>
            <li class="d-flex flex-wrap align-items-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-mail" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><rect width="18" height="14" x="3" y="5" rx="2"/><path d="m3 7 9 6 9-6"/></svg>
              <a href="{% url 'contact' %}" class="navigation-link">Contáctenos</a>
            </li>
          </ul>
          <ul class="nav d-flex">
            <li class="d-flex flex-wrap align-items-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-user" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"/></svg>
              <a href="{% url 'login' %}" class="navigation-link">Iniciar Sesión</a>
            </li>
            <li class="d-flex flex-wrap align-items-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icon-tabler-users" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="9" cy="7" r="4"/><path d="M3 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2M16 3.13a4 4 0 0 1 0 7.75M21 21v-2a4 4 0 0 0-3-3.85"/></svg>
              <a href="{% url 'register' %}" class="navigation-link">Crea tu cuenta</a>
            </li>
          </ul>
        </section>
        {% endif %}
      </div>
  </header>
  {% block content %}
  {% endblock content %}
  <script type="text/javascript">
    const notification = document.getElementById("add-product");
    window.addEventListener('load', event => {
      notification.textContent = {{cart.products.count}}
    })  
  </script>
  <script type="text/javascript" src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'js/steps-order.js' %}"></script>
  
  {% block js %}{% endblock js %}
</body>
</html>